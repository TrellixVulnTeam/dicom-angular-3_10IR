{"ast":null,"code":"import { DICOMViewerComponent } from 'dicomViewer';\nimport * as i0 from \"@angular/core\";\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    ngOnInit() {\n      cornerstoneWADOImageLoader.external.cornerstone = cornerstone; // inicializa WADO Image loader\n      // configura codecs e web workers\n\n      cornerstoneWADOImageLoader.webWorkerManager.initialize({\n        webWorkerPath: './assets/cornerstone/webworkers/cornerstoneWADOImageLoaderWebWorker.js',\n        taskConfiguration: {\n          'decodeTask': {\n            codecsPath: '../codecs/cornerstoneWADOImageLoaderCodecs.js'\n          }\n        }\n      });\n    }\n    /**\r\n     * Load selected DICOM images\r\n     *\r\n     * @param files list of selected dicom files\r\n     */\n\n\n    loadDICOMImages(files) {\n      if (files && files.length > 0) {\n        let imageList = [];\n        const fileList = Array.from(files);\n        fileList.sort((a, b) => {\n          if (a.name > b.name) return 1;\n          if (b.name > a.name) return -1;\n          return 0;\n        }); //cornerstoneWADOImageLoader.wadouri.fileManager.purge();\n\n        cornerstoneWADOImageLoader.wadouri.dataSetCacheManager.purge(); // loop thru the File list and build a list of wadouri imageIds (dicomfile:)\n\n        for (let i = 0; i < fileList.length; i++) {\n          const dicomFile = fileList[i];\n          const imageId = cornerstoneWADOImageLoader.wadouri.fileManager.add(dicomFile);\n          imageList.push(imageId);\n        }\n\n        this.viewPort.resetAllTools(); // now load all Images, using their wadouri\n\n        this.viewPort.loadStudyImages(imageList);\n      } else alert('Escolha imagens DICOM a exibir.');\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)();\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    viewQuery: function AppComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(DICOMViewerComponent, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.viewPort = _t.first);\n      }\n    },\n    decls: 11,\n    vars: 3,\n    consts: [[2, \"height\", \"100%\", \"width\", \"100%\"], [2, \"display\", \"flex\", \"margin-left\", \"120px\", \"align-items\", \"center\"], [\"href\", \"https://github.com/cornerstonejs\"], [1, \"choose_file\"], [\"type\", \"file\", \"multiple\", \"\", \"accept\", \"application/dicom\", \"id\", \"imagens\", \"title\", \"selecione arquivos de imagens\", 1, \"hide_file\", 3, \"change\"], [2, \"display\", \"flex\", \"height\", \"calc(100% - 90px)\", \"width\", \"100%\"], [2, \"height\", \"100%\", \"width\", \"100%\", \"margin\", \"10px\", 3, \"enableViewerTools\", \"enablePlayTools\", \"maxImagesToLoad\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"h1\");\n        i0.ɵɵtext(3, \" A demo DICOM Viewer, based on \");\n        i0.ɵɵelementStart(4, \"a\", 2);\n        i0.ɵɵtext(5, \"Cornerstone\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 3);\n        i0.ɵɵtext(7, \" Choose Your DICOM Files \");\n        i0.ɵɵelementStart(8, \"input\", 4);\n        i0.ɵɵlistener(\"change\", function AppComponent_Template_input_change_8_listener($event) {\n          return ctx.loadDICOMImages($event.target.files);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵelement(10, \"dicom-viewer\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"enableViewerTools\", true)(\"enablePlayTools\", true)(\"maxImagesToLoad\", 20);\n      }\n    },\n    styles: [\".choose_file[_ngcontent-%COMP%]{padding:5px 10px;background:#00ad2d;border:1px solid #00ad2d;position:relative;color:#fff;border-radius:2px;text-align:center;float:left;cursor:pointer;margin-left:50px}.hide_file[_ngcontent-%COMP%]{position:absolute;z-index:1000;opacity:0;cursor:pointer;right:0;top:0;height:100%;font-size:24px;width:100%}\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}